<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analysis of ice Cycle Variables for Northern Rivers in Canada: Peace, Athabasca, and Slave</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PAS_Rivers_files/libs/clipboard/clipboard.min.js"></script>
<script src="PAS_Rivers_files/libs/quarto-html/quarto.js"></script>
<script src="PAS_Rivers_files/libs/quarto-html/popper.min.js"></script>
<script src="PAS_Rivers_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PAS_Rivers_files/libs/quarto-html/anchor.min.js"></script>
<link href="PAS_Rivers_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PAS_Rivers_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PAS_Rivers_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PAS_Rivers_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PAS_Rivers_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis of ice Cycle Variables for Northern Rivers in Canada: Peace, Athabasca, and Slave</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="analysis-of-ice-cycle-variables-for-northern-rivers-in-canada-peace-athabasca-and-slave" class="level2">
<h2 class="anchored" data-anchor-id="analysis-of-ice-cycle-variables-for-northern-rivers-in-canada-peace-athabasca-and-slave">Analysis of ice Cycle Variables for Northern Rivers in Canada: Peace, Athabasca, and Slave</h2>
<p>by Jacqui Levy</p>
<section id="scientists-can-now-analyze-a-rivers-ice-cycle-using-both-historical-and-current-data-from-the-water-survey-of-canada-database.-newly-developed-functions-are-available-and-applicable-at-scale-on-any-river-in-canada-with-seasonal-ice-coverage-and-are-demonstrated-here.-these-functions-grant-scientists-and-watershed-managers-the-tools-to-conduct-reproducible-research-at-scale-and-enable-data-driven-water-use-decisions." class="level4">
<h4 class="anchored" data-anchor-id="scientists-can-now-analyze-a-rivers-ice-cycle-using-both-historical-and-current-data-from-the-water-survey-of-canada-database.-newly-developed-functions-are-available-and-applicable-at-scale-on-any-river-in-canada-with-seasonal-ice-coverage-and-are-demonstrated-here.-these-functions-grant-scientists-and-watershed-managers-the-tools-to-conduct-reproducible-research-at-scale-and-enable-data-driven-water-use-decisions.">Scientists can now analyze a river’s ice cycle using both historical and current data from the Water Survey of Canada database. Newly developed functions are available and applicable at scale on any river in Canada with seasonal ice coverage, and are demonstrated here. These functions grant scientists and watershed managers the tools to conduct reproducible research at scale, and enable data-driven water use decisions.</h4>
</section>
<section id="the-following-is-an-analysis-of-river-ice-regimes-within-the-peace-athabasca-delta-pad-using-these-newly-developed-functions." class="level4">
<h4 class="anchored" data-anchor-id="the-following-is-an-analysis-of-river-ice-regimes-within-the-peace-athabasca-delta-pad-using-these-newly-developed-functions.">The following is an analysis of river ice regimes within the Peace-Athabasca Delta (PAD), using these newly developed functions.</h4>
<p>Note: These functions are undergoing unit-testing and being developed into an open-source R package for public use.</p>
</section>
<section id="what-is-an-ice-cycle-and-why-is-it-important" class="level3">
<h3 class="anchored" data-anchor-id="what-is-an-ice-cycle-and-why-is-it-important">What is an ice cycle and why is it important?</h3>
<p>River ice is a major component of the hydrological cycle for northern rivers like the Peace, Slave, and Athabasca Rivers. These rivers experience thick ice coverage every winter, and a predictable seasonal spring-break up season called freshet. This ice-break up is linked to key ecological processes, such as overland flooding. This flooding replenishes nearby wetlands with water and sustains rich habitat for a biodiverse ecosystem.</p>
<p>Climate change is causing broad spatial and temporal shifts in river ice regimes across Canada, causing harmful downstream impacts to ecosystems and wildlife. Understanding how river ice cycles are shifting is key to building adaptive watershed management plans in a changing environment.</p>
</section>
<section id="what-statistical-analysis-was-used-and-why" class="level3">
<h3 class="anchored" data-anchor-id="what-statistical-analysis-was-used-and-why">What statistical analysis was used and why?</h3>
<p>I analyzed trends in the Peace-Athabasca watershed for the following variables over the past 60 years:</p>
<ol type="1">
<li><p>The timing of the onset of freshet</p></li>
<li><p>The timing of freeze-up and break-up dates</p></li>
<li><p>The length of continuous ice coverage each year</p></li>
</ol>
<p>To understand changes in these variables, a Mann-Kendall statistical test was used. A Mann-Kendall test is a non-parametric test that detects a monotonic trend (upwards or downwards) in the data.</p>
<p>Analyzing hydrological data (and other time-series data) is challenging as the daily or monthly observations are not independent of one another. They experience serial autocorrelation: a river’s flow today will be pretty similar to its flow tomorrow, and these observations do not meet the Mann-Kendall test’s assumption of independence.</p>
<p>However, yearly variables like annual ice coverage can be assumed to be independent of one another. For example, the day a river froze this year does not depend on which day it froze last year. Yearly variables such as these are frequently used in a Mann-Kendall trend analysis.</p>
</section>
<section id="packages-and-functions" class="level3">
<h3 class="anchored" data-anchor-id="packages-and-functions">Packages and Functions:</h3>
<p>A set of functions were developed to calculate these ice variables: https://github.com/Jacqui-123/EFlows-Project/blob/main/Eflows_FUNCTIONS.R</p>
<p>Open-source hydrological data from the Water Survey of Canada: https://www.canada.ca/en/environment-climate-change/services/water-overview/quantity/monitoring/survey.html</p>
<p>Open-sourced R packages: tidyverse, tidyhydat, zoo, lubridate, ggplot, MannKendall, dataRetrieval</p>
<p>Source code for this project with complete tidying workflow: https://github.com/Jacqui-123/EFlows-Project/blob/main/6_PAS_Rivers.Rmd</p>
</section>
<section id="data-processing-methods" class="level3">
<h3 class="anchored" data-anchor-id="data-processing-methods">Data Processing Methods:</h3>
<p>The following is a technical roadmap of how to use these new functions to calculate ice cycle variables for multiple stations and years. This method is scalable and works for multiple stations.</p>
<section id="first-retrieve-water-flow-data-from-the-water-survey-of-canada-and-add-a-column-for-water-year-and-a-column-for-day-of-the-water-year." class="level4">
<h4 class="anchored" data-anchor-id="first-retrieve-water-flow-data-from-the-water-survey-of-canada-and-add-a-column-for-water-year-and-a-column-for-day-of-the-water-year.">1) First, retrieve water flow data from the Water Survey of Canada, and add a column for “water year” and a column for “day of the water year”.</h4>
<p>A “water year” or hydrological year, is measured from October 1-September 30th, and measures the cycle of a watershed from its lowest baseflow point.</p>
<p>A “day of the year” or Julian day, is a continuous count of days from the beginning of the water year. These methods are used in hydrology to standardize the reporting of water statistics and forecasting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#extract stations from the Water Survey of Canada database</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>stn_all <span class="ot">&lt;-</span> tidyhydat<span class="sc">::</span><span class="fu">hy_daily_flows</span>(<span class="at">station_number =</span> <span class="fu">c</span>(<span class="st">'07BE001'</span>,<span class="st">'07DA001'</span>, <span class="st">'07HA001'</span>,<span class="st">'07NB001'</span>, <span class="st">'07KC001'</span>, <span class="st">'07AD002'</span>,<span class="st">'07DA001'</span>, <span class="st">'07AA002'</span>)) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>stn_all <span class="ot">&lt;-</span> stn_all <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(STATION_NUMBER) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#make a complete set of days for each year </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">complete</span>(<span class="at">Date =</span> <span class="fu">seq.Date</span>(<span class="fu">as.Date</span>(<span class="st">"1920/10/1"</span>), <span class="fu">as.Date</span>(<span class="st">"2022/09/30"</span>), <span class="at">by=</span><span class="st">"day"</span>))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#add water year</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>stn_all <span class="ot">&lt;-</span> <span class="fu">addWaterYear</span>(stn_all) <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">waterYear =</span> <span class="fu">as.character</span>(waterYear))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#add day of the year from "Eflows_FUNCTIONS.R" function </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>stn_all_split <span class="ot">&lt;-</span> <span class="fu">split</span>(stn_all, stn_all<span class="sc">$</span>STATION_NUMBER )</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>stn_all_split_doy <span class="ot">&lt;-</span> <span class="fu">lapply</span>(stn_all_split, calc_day_of_wyear)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>stn_all <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(stn_all_split_doy, <span class="at">.id =</span> <span class="st">"STATION_NUMBER"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#rm(stn_all_split, stn_all_split_doy)</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">#View(stn_all_split)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tidy-data-detect-and-resolve-anomalies-and-deal-with-missing-data." class="level4">
<h4 class="anchored" data-anchor-id="tidy-data-detect-and-resolve-anomalies-and-deal-with-missing-data.">2) Tidy data: detect and resolve anomalies and deal with missing data.</h4>
<p>Use the functions built for this project to delete years with more than 14 consecutive days of missing data, and the tidyverse package to estimate missing observations using the last existing observation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stn_cln <span class="ot">&lt;-</span> stn_all <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">as.Date</span>(Date)) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(waterYear <span class="sc">&gt;</span> <span class="dv">1970</span> <span class="sc">&amp;</span> waterYear <span class="sc">&lt;</span> <span class="dv">2021</span>) </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#delete years that have &gt;14 days missing data using calc_rle function from functions I built for this project</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>lst_stns_cln <span class="ot">&lt;-</span> <span class="fu">split</span>(stn_cln, stn_cln<span class="sc">$</span>STATION_NUMBER )</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>lst_stns_cln_rle <span class="ot">&lt;-</span> <span class="fu">lapply</span>(lst_stns_cln, calc_rle)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#unlist the station numbers</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>stns_ready <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(lst_stns_cln_rle, <span class="at">.id =</span> <span class="st">"STATION_NUMBER"</span>) </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#reformat date and fill remaining missing values with preceding values</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>stns_daymonthyear <span class="ot">&lt;-</span> stns_ready <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">format</span>(Date,<span class="st">"%d-%m-%Y"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(STATION_NUMBER) <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(Value, <span class="at">.direction =</span> <span class="st">'downup'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="calculate-the-ice-cycle-variables-using-the-ice-functions" class="level4">
<h4 class="anchored" data-anchor-id="calculate-the-ice-cycle-variables-using-the-ice-functions">3) Calculate the ice cycle variables using the ice functions</h4>
<p>These functions calculate the timing of the onset of freshet, the freeze and thaw dates, and the days of total continuous ice coverage. Use the split-apply-combine method to loop over a list of data frames and calculate all variables for multiple stations.</p>
<p>See source code for how to combine the output dataframes, especially if there are an uneven number of years for each station.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#first make a list of dfs- split by station number</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>lst_stns <span class="ot">&lt;-</span> <span class="fu">split</span>(stns_yearmonthday, stns_yearmonthday<span class="sc">$</span>STATION_NUMBER )</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#apply ice variable function to all dfs in the list, by station </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>stn_g1 <span class="ot">&lt;-</span> <span class="fu">lapply</span>(lst_stns, Group_1_ice_cover)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>stn_g2 <span class="ot">&lt;-</span> <span class="fu">lapply</span>(lst_stns, Group_2_freeze_thaw)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>stn_g3 <span class="ot">&lt;-</span> <span class="fu">lapply</span>(lst_stns, Group_3_freshet)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Unnlist the outputs</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>output1 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(stn_g1, <span class="at">.id =</span> <span class="st">"STATION_NUMBER"</span>) </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>output2 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(stn_g2, <span class="at">.id =</span> <span class="st">"STATION_NUMBER"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>output3 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(stn_g3, <span class="at">.id =</span> <span class="st">"STATION_NUMBER"</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> stn_all <span class="sc">%&gt;%</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(STATION_NUMBER <span class="sc">==</span> <span class="st">"07AA002"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mann-kendall-trend-analysis-use-the-mk-function-created-for-this-project" class="level4">
<h4 class="anchored" data-anchor-id="mann-kendall-trend-analysis-use-the-mk-function-created-for-this-project">4) Mann-Kendall Trend Analysis: Use the MK function created for this project</h4>
<p>Tests were performed at an alpha = .05, a conservative level to ensure a low probability of a type I error.</p>
</section>
<section id="results-table-for-select-stations" class="level4">
<h4 class="anchored" data-anchor-id="results-table-for-select-stations"><strong>Results table for select stations:</strong></h4>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">STATION_NUMBER</th>
<th style="text-align: right;">Freshet_Onset</th>
<th style="text-align: left;">Interpretation</th>
<th style="text-align: right;">ice_cover</th>
<th style="text-align: left;">Interpretation.1</th>
<th style="text-align: right;">Freeze_doy</th>
<th style="text-align: left;">Interpretation.2</th>
<th style="text-align: right;">Thaw_doy</th>
<th style="text-align: left;">Interpretation.3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">07BE001</td>
<td style="text-align: right;">0.299</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.025</td>
<td style="text-align: left;">Signficant</td>
<td style="text-align: right;">0.212</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: left;">Signficant</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">07DA001</td>
<td style="text-align: right;">0.615</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.203</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.375</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.240</td>
<td style="text-align: left;">Not Significant</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">07HA001</td>
<td style="text-align: right;">0.320</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: left;">Signficant</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: left;">Signficant</td>
<td style="text-align: right;">0.009</td>
<td style="text-align: left;">Signficant</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">07KC001</td>
<td style="text-align: right;">0.166</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.021</td>
<td style="text-align: left;">Signficant</td>
<td style="text-align: right;">0.055</td>
<td style="text-align: left;">Not Significant</td>
<td style="text-align: right;">0.508</td>
<td style="text-align: left;">Not Significant</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="interpretation" class="level4">
<h4 class="anchored" data-anchor-id="interpretation"><strong>Interpretation</strong></h4>
<p>Most stations had non-significant values for these ice variables, and the Mann-Kendall test did not detect a monotonic trend in ice coverage for most variables.</p>
<p>This does not mean that there have been no changes in ice regimes, but only that this test did not detect an effect at the selected level. More precise analysis of across the full watershed are needed, and will be forthcoming.</p>
<p>It is notable from the results table that the test detected a trend for two stations (07HA001 &amp; 07KC001) along the Peace River, across several of the ice variables.</p>
<p>The ice cycle variables for these two stations are graphed below using the lm smooth method to fit a linear trend to the data.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-side-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PAS_Rivers_files/figure-html/fig-side-1.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: <strong>?(caption)</strong></figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-side-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="PAS_Rivers_files/figure-html/fig-side-2.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2: <strong>?(caption)</strong></figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="PAS_Rivers_files/figure-html/figures-side-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="PAS_Rivers_files/figure-html/figures-side-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>From the graphs above, it appears that the Peace River is freezing later in the year, and thawing earlier, with less total days of continual ice coverage. This indicates a shift to a warmer and drier regime. Other studies have found similar results, but a more thorough investigation would be needed to draw any conclusions from the data here.</p>
<p>It would also be useful to conduct a Mann-Kendall test on the freeze, thaw, and freshet flows measurements to see if these regime shifts might be caused by lower flows, or if there are other mechanistic pathways.</p>
<p>Conversely, the timing of freshet appears to be later in the year. This could be due to lower or more variable flows, making it difficult for the function’s algorithm to detect the onset of freshet at the precision is was built for. Perhaps a different algorithm is needed for different watersheds, or perhaps we are seeing unprecedented changes in watershed ice regimes.</p>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion"><strong>Conclusion</strong></h4>
<p>This document describes the workflow and methodology for using ice variable functions to assess trends in ice regimes for rivers across Canada.</p>
<p>The Canadian River ice Database Project previously calculated some of these ice cycle variables, however, they were only calculated for approximately 300 water stations, and only through 2015. These newly developed functions allow scientists to calculate present-day data, in addition to historical data, for any of the 1000+ water stations from the Water Survey of Canada.</p>
<p>The next step in this project is to create an accessible, open-source R package, and apply this analysis broadly for approximately 900+ reference stations within Canada. My hope is that scientists and watershed managers will be able to use this tool in conjunction with climatic data and models, to better assess and predict broad-scale watershed changes.</p>
</section>
<section id="references" class="level4">
<h4 class="anchored" data-anchor-id="references"><strong>References</strong></h4>
<p>Beltaos, S., &amp; Bonsal, B. (2021). Climate change impacts on Peace River ice thickness and implications to ice-jam flooding of Peace-Athabasca Delta, Canada. Cold Regions Science and Technology, 186, 103279. https://doi.org/10.1016/j.coldregions.2021.103279</p>
<p>Beltaos, S. (2018). Frequency of ice-jam flooding of Peace-Athabasca Delta. Canadian Journal of Civil Engineering, 45(1), 71–75. https://doi.org/10.1139/cjce-2017-0434</p>
<p>de Rham, L., Dibike, Y., Beltaos, S., Peters, D., Bonsal, B., &amp; Prowse, T. (2020). A Canadian River ice Database from the National Hydrometric Program Archives. Earth System Science Data, 12(3), 1835–1860. https://doi.org/10.5194/essd-12-1835-2020</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>